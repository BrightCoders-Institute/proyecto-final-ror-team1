  [1m[36mActiveRecord::InternalMetadata Pluck (1.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (55.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "shipments_tracker_test"[0m
  [1m[35m (163.0ms)[0m  [1m[35mCREATE DATABASE "shipments_tracker_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "company_name" character varying, "active" boolean DEFAULT TRUE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "carriers" CASCADE[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "carriers" ("id" bigserial primary key, "name" character varying NOT NULL, "url" character varying NOT NULL, "settings" jsonb, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "parser_rules" CASCADE[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "parser_rules" ("id" bigserial primary key, "code" character varying, "description" text, "internal_code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "carrier_id" bigint)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE INDEX "index_parser_rules_on_carrier_id" ON "parser_rules" ("carrier_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "shipments" CASCADE[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "shipments" ("id" bigserial primary key, "account_id" bigint, "status" character varying, "tracking_number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "tracking_history" jsonb DEFAULT '{}', "carrier_id" bigint)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_shipments_on_account_id" ON "shipments" ("account_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_shipments_on_carrier_id" ON "shipments" ("carrier_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_shipments_on_id" ON "shipments" ("id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_shipments_on_tracking_number" ON "shipments" ("tracking_number")[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "encrypted_password" character varying, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "confirmation_token" character varying, "confirmed_at" timestamp(6), "confirmation_sent_at" timestamp(6), "unconfirmed_email" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "account_id" bigint, "role" character varying DEFAULT 'owner')[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_users_on_account_id" ON "users" ("account_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_confirmation_token" ON "users" ("confirmation_token")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230810004655)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230801222313),
(20230802162213),
(20230803003606),
(20230803024435),
(20230803025534),
(20230804000126),
(20230804004847),
(20230804214644),
(20230805000101),
(20230805000340),
(20230805000733),
(20230805005552),
(20230805010511);

[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-08-16 23:58:31.132561"], ["updated_at", "2023-08-16 23:58:31.132561"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "71c683fc783774ad97490fa52fa05ac35ea60304"], ["created_at", "2023-08-16 23:58:31.136593"], ["updated_at", "2023-08-16 23:58:31.136593"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:02:30.641243', '2023-08-17 00:02:30.641243'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:02:30.641243', '2023-08-17 00:02:30.641243');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:02:30.662493', '2023-08-17 00:02:30.662493'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:02:30.662493', '2023-08-17 00:02:30.662493');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:02:30.666229', '2023-08-17 00:02:30.666229', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:02:30.666229', '2023-08-17 00:02:30.666229', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:02:30.668750', '2023-08-17 00:02:30.668750', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:02:30.668750', '2023-08-17 00:02:30.668750', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (37.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.7ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:02:30.830761"], ["updated_at", "2023-08-17 00:02:30.830761"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:02:30.833226"], ["updated_at", "2023-08-17 00:02:30.833226"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:02:30.865986"], ["updated_at", "2023-08-17 00:02:30.865986"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:02:30.867788"], ["updated_at", "2023-08-17 00:02:30.867788"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:02:30.874358"], ["updated_at", "2023-08-17 00:02:30.874358"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.2ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:03:37.759654', '2023-08-17 00:03:37.759654'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:03:37.759654', '2023-08-17 00:03:37.759654');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:03:37.764080', '2023-08-17 00:03:37.764080'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:03:37.764080', '2023-08-17 00:03:37.764080');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:03:37.767010', '2023-08-17 00:03:37.767010', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:03:37.767010', '2023-08-17 00:03:37.767010', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:03:37.769749', '2023-08-17 00:03:37.769749', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:03:37.769749', '2023-08-17 00:03:37.769749', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:03:37.811440"], ["updated_at", "2023-08-17 00:03:37.811440"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:03:37.818589"], ["updated_at", "2023-08-17 00:03:37.818589"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:03:37.884886"], ["updated_at", "2023-08-17 00:03:37.884886"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (13.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:03:37.915776"], ["updated_at", "2023-08-17 00:03:37.915776"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:03:37.919779"], ["updated_at", "2023-08-17 00:03:37.919779"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:07:43.972992', '2023-08-17 00:07:43.972992'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:07:43.972992', '2023-08-17 00:07:43.972992');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:07:43.979521', '2023-08-17 00:07:43.979521'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:07:43.979521', '2023-08-17 00:07:43.979521');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:07:44.001206', '2023-08-17 00:07:44.001206', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:07:44.001206', '2023-08-17 00:07:44.001206', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:07:44.004837', '2023-08-17 00:07:44.004837', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:07:44.004837', '2023-08-17 00:07:44.004837', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.4ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.4ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:07:44.056634"], ["updated_at", "2023-08-17 00:07:44.056634"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:07:44.063265"], ["updated_at", "2023-08-17 00:07:44.063265"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (1.7ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:07:44.123079"], ["updated_at", "2023-08-17 00:07:44.123079"]]
  [1m[36mTRANSACTION (8.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:07:44.136622"], ["updated_at", "2023-08-17 00:07:44.136622"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:07:44.153983"], ["updated_at", "2023-08-17 00:07:44.153983"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:07:44.154985"], ["updated_at", "2023-08-17 00:07:44.154985"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:07:44.157221"], ["updated_at", "2023-08-17 00:07:44.157221"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:07:44.157803"], ["updated_at", "2023-08-17 00:07:44.157803"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:08:48.901812', '2023-08-17 00:08:48.901812'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:08:48.901812', '2023-08-17 00:08:48.901812');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:08:48.905633', '2023-08-17 00:08:48.905633'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:08:48.905633', '2023-08-17 00:08:48.905633');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:08:48.907948', '2023-08-17 00:08:48.907948', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:08:48.907948', '2023-08-17 00:08:48.907948', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:08:48.910828', '2023-08-17 00:08:48.910828', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:08:48.910828', '2023-08-17 00:08:48.910828', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:08:48.943576"], ["updated_at", "2023-08-17 00:08:48.943576"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:08:49.006629"], ["updated_at", "2023-08-17 00:08:49.006629"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:08:49.007501"], ["updated_at", "2023-08-17 00:08:49.007501"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:08:49.037529"], ["updated_at", "2023-08-17 00:08:49.037529"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:08:49.038187"], ["updated_at", "2023-08-17 00:08:49.038187"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:08:49.040257"], ["updated_at", "2023-08-17 00:08:49.040257"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:08:49.040746"], ["updated_at", "2023-08-17 00:08:49.040746"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:08:49.061044"], ["updated_at", "2023-08-17 00:08:49.061044"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:09:57.530504', '2023-08-17 00:09:57.530504'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:09:57.530504', '2023-08-17 00:09:57.530504');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:09:57.537703', '2023-08-17 00:09:57.537703'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:09:57.537703', '2023-08-17 00:09:57.537703');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:09:57.541357', '2023-08-17 00:09:57.541357', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:09:57.541357', '2023-08-17 00:09:57.541357', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:09:57.544774', '2023-08-17 00:09:57.544774', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:09:57.544774', '2023-08-17 00:09:57.544774', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (31.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:09:57.613247"], ["updated_at", "2023-08-17 00:09:57.613247"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.4ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:09:57.708153"], ["updated_at", "2023-08-17 00:09:57.708153"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:09:57.710799"], ["updated_at", "2023-08-17 00:09:57.710799"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:09:57.711467"], ["updated_at", "2023-08-17 00:09:57.711467"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:09:57.722502"], ["updated_at", "2023-08-17 00:09:57.722502"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:09:57.723217"], ["updated_at", "2023-08-17 00:09:57.723217"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:09:57.727956"], ["updated_at", "2023-08-17 00:09:57.727956"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (1.6ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:09:57.728608"], ["updated_at", "2023-08-17 00:09:57.728608"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (1.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.6ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:10:27.048069', '2023-08-17 00:10:27.048069'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:10:27.048069', '2023-08-17 00:10:27.048069');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:10:27.057114', '2023-08-17 00:10:27.057114'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:10:27.057114', '2023-08-17 00:10:27.057114');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:27.061213', '2023-08-17 00:10:27.061213', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:27.061213', '2023-08-17 00:10:27.061213', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:27.064139', '2023-08-17 00:10:27.064139', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:27.064139', '2023-08-17 00:10:27.064139', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:10:27.089485"], ["updated_at", "2023-08-17 00:10:27.089485"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:10:27.093250"], ["updated_at", "2023-08-17 00:10:27.093250"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:10:27.110987"], ["updated_at", "2023-08-17 00:10:27.110987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:10:27.111850"], ["updated_at", "2023-08-17 00:10:27.111850"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:10:27.114987"], ["updated_at", "2023-08-17 00:10:27.114987"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:10:27.115827"], ["updated_at", "2023-08-17 00:10:27.115827"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:10:48.348039', '2023-08-17 00:10:48.348039'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:10:48.348039', '2023-08-17 00:10:48.348039');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:10:48.368681', '2023-08-17 00:10:48.368681'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:10:48.368681', '2023-08-17 00:10:48.368681');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:48.374294', '2023-08-17 00:10:48.374294', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:48.374294', '2023-08-17 00:10:48.374294', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:48.376562', '2023-08-17 00:10:48.376562', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:10:48.376562', '2023-08-17 00:10:48.376562', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.8ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:11:23.535158', '2023-08-17 00:11:23.535158'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:11:23.535158', '2023-08-17 00:11:23.535158');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:11:23.540189', '2023-08-17 00:11:23.540189'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:11:23.540189', '2023-08-17 00:11:23.540189');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:23.544222', '2023-08-17 00:11:23.544222', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:23.544222', '2023-08-17 00:11:23.544222', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:23.548542', '2023-08-17 00:11:23.548542', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:23.548542', '2023-08-17 00:11:23.548542', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:11:23.583305"], ["updated_at", "2023-08-17 00:11:23.583305"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:11:37.561282', '2023-08-17 00:11:37.561282'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:11:37.561282', '2023-08-17 00:11:37.561282');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:11:37.568518', '2023-08-17 00:11:37.568518'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:11:37.568518', '2023-08-17 00:11:37.568518');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:37.572047', '2023-08-17 00:11:37.572047', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:37.572047', '2023-08-17 00:11:37.572047', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:37.577003', '2023-08-17 00:11:37.577003', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:37.577003', '2023-08-17 00:11:37.577003', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:11:53.809846', '2023-08-17 00:11:53.809846'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:11:53.809846', '2023-08-17 00:11:53.809846');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:11:53.815900', '2023-08-17 00:11:53.815900'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:11:53.815900', '2023-08-17 00:11:53.815900');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:53.819092', '2023-08-17 00:11:53.819092', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:53.819092', '2023-08-17 00:11:53.819092', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:53.822373', '2023-08-17 00:11:53.822373', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:11:53.822373', '2023-08-17 00:11:53.822373', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:13:05.849491', '2023-08-17 00:13:05.849491'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:13:05.849491', '2023-08-17 00:13:05.849491');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:13:05.853965', '2023-08-17 00:13:05.853965'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:13:05.853965', '2023-08-17 00:13:05.853965');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:13:05.857482', '2023-08-17 00:13:05.857482', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:13:05.857482', '2023-08-17 00:13:05.857482', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:13:05.859973', '2023-08-17 00:13:05.859973', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:13:05.859973', '2023-08-17 00:13:05.859973', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:16:25.695841', '2023-08-17 00:16:25.695841'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:16:25.695841', '2023-08-17 00:16:25.695841');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:16:25.712145', '2023-08-17 00:16:25.712145'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:16:25.712145', '2023-08-17 00:16:25.712145');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:16:25.717182', '2023-08-17 00:16:25.717182', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:16:25.717182', '2023-08-17 00:16:25.717182', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:16:25.721178', '2023-08-17 00:16:25.721178', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:16:25.721178', '2023-08-17 00:16:25.721178', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.8ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:18:26.715194', '2023-08-17 00:18:26.715194'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:18:26.715194', '2023-08-17 00:18:26.715194');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:18:26.719343', '2023-08-17 00:18:26.719343'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:18:26.719343', '2023-08-17 00:18:26.719343');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:26.723255', '2023-08-17 00:18:26.723255', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:26.723255', '2023-08-17 00:18:26.723255', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:26.726938', '2023-08-17 00:18:26.726938', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:26.726938', '2023-08-17 00:18:26.726938', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:18:26.808086"], ["updated_at", "2023-08-17 00:18:26.808086"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:18:26.811259"], ["updated_at", "2023-08-17 00:18:26.811259"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:18:26.826383"], ["updated_at", "2023-08-17 00:18:26.826383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:18:26.827744"], ["updated_at", "2023-08-17 00:18:26.827744"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:18:26.835211"], ["updated_at", "2023-08-17 00:18:26.835211"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:18:26.835954"], ["updated_at", "2023-08-17 00:18:26.835954"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:18:59.960502', '2023-08-17 00:18:59.960502'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:18:59.960502', '2023-08-17 00:18:59.960502');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:18:59.983533', '2023-08-17 00:18:59.983533'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:18:59.983533', '2023-08-17 00:18:59.983533');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:59.986341', '2023-08-17 00:18:59.986341', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:59.986341', '2023-08-17 00:18:59.986341', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:59.988980', '2023-08-17 00:18:59.988980', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:18:59.988980', '2023-08-17 00:18:59.988980', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:19:00.060735"], ["updated_at", "2023-08-17 00:19:00.060735"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:19:00.064417"], ["updated_at", "2023-08-17 00:19:00.064417"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:19:00.086167"], ["updated_at", "2023-08-17 00:19:00.086167"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:19:00.087145"], ["updated_at", "2023-08-17 00:19:00.087145"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:19:00.095455"], ["updated_at", "2023-08-17 00:19:00.095455"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:19:00.096448"], ["updated_at", "2023-08-17 00:19:00.096448"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:21:34.446624', '2023-08-17 00:21:34.446624'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:21:34.446624', '2023-08-17 00:21:34.446624');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:21:34.464658', '2023-08-17 00:21:34.464658'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:21:34.464658', '2023-08-17 00:21:34.464658');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:21:34.471949', '2023-08-17 00:21:34.471949', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:21:34.471949', '2023-08-17 00:21:34.471949', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:21:34.474539', '2023-08-17 00:21:34.474539', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:21:34.474539', '2023-08-17 00:21:34.474539', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (15.8ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:21:34.541336"], ["updated_at", "2023-08-17 00:21:34.541336"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:21:34.561111"], ["updated_at", "2023-08-17 00:21:34.561111"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:21:34.579643"], ["updated_at", "2023-08-17 00:21:34.579643"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:21:34.580626"], ["updated_at", "2023-08-17 00:21:34.580626"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:21:34.588189"], ["updated_at", "2023-08-17 00:21:34.588189"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:21:34.589002"], ["updated_at", "2023-08-17 00:21:34.589002"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.6ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:22:16.016153', '2023-08-17 00:22:16.016153'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:22:16.016153', '2023-08-17 00:22:16.016153');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:22:16.020683', '2023-08-17 00:22:16.020683'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:22:16.020683', '2023-08-17 00:22:16.020683');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:22:16.023497', '2023-08-17 00:22:16.023497', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:22:16.023497', '2023-08-17 00:22:16.023497', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:22:16.027089', '2023-08-17 00:22:16.027089', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:22:16.027089', '2023-08-17 00:22:16.027089', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:22:16.114390"], ["updated_at", "2023-08-17 00:22:16.114390"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:22:16.117604"], ["updated_at", "2023-08-17 00:22:16.117604"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:22:16.130383"], ["updated_at", "2023-08-17 00:22:16.130383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:22:16.131260"], ["updated_at", "2023-08-17 00:22:16.131260"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:22:16.137952"], ["updated_at", "2023-08-17 00:22:16.137952"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:22:16.138804"], ["updated_at", "2023-08-17 00:22:16.138804"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:24:01.591382', '2023-08-17 00:24:01.591382'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:24:01.591382', '2023-08-17 00:24:01.591382');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:24:01.611459', '2023-08-17 00:24:01.611459'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:24:01.611459', '2023-08-17 00:24:01.611459');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:01.615170', '2023-08-17 00:24:01.615170', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:01.615170', '2023-08-17 00:24:01.615170', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:01.619289', '2023-08-17 00:24:01.619289', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:01.619289', '2023-08-17 00:24:01.619289', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (11.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:24:01.691890"], ["updated_at", "2023-08-17 00:24:01.691890"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:24:01.706745"], ["updated_at", "2023-08-17 00:24:01.706745"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (2.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:24:01.719890"], ["updated_at", "2023-08-17 00:24:01.719890"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:24:01.723566"], ["updated_at", "2023-08-17 00:24:01.723566"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (1.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:24:01.726303"], ["updated_at", "2023-08-17 00:24:01.726303"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:24:01.727909"], ["updated_at", "2023-08-17 00:24:01.727909"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:24:26.080421', '2023-08-17 00:24:26.080421'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:24:26.080421', '2023-08-17 00:24:26.080421');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:24:26.084718', '2023-08-17 00:24:26.084718'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:24:26.084718', '2023-08-17 00:24:26.084718');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:26.089302', '2023-08-17 00:24:26.089302', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:26.089302', '2023-08-17 00:24:26.089302', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:26.093323', '2023-08-17 00:24:26.093323', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:24:26.093323', '2023-08-17 00:24:26.093323', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (11.5ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:24:26.167416"], ["updated_at", "2023-08-17 00:24:26.167416"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:24:26.182879"], ["updated_at", "2023-08-17 00:24:26.182879"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:24:26.197431"], ["updated_at", "2023-08-17 00:24:26.197431"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:24:26.198243"], ["updated_at", "2023-08-17 00:24:26.198243"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:24:26.200274"], ["updated_at", "2023-08-17 00:24:26.200274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:24:26.200896"], ["updated_at", "2023-08-17 00:24:26.200896"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:26:46.976464', '2023-08-17 00:26:46.976464'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:26:46.976464', '2023-08-17 00:26:46.976464');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:26:46.980417', '2023-08-17 00:26:46.980417'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:26:46.980417', '2023-08-17 00:26:46.980417');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:26:46.983761', '2023-08-17 00:26:46.983761', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:26:46.983761', '2023-08-17 00:26:46.983761', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:26:46.988354', '2023-08-17 00:26:46.988354', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:26:46.988354', '2023-08-17 00:26:46.988354', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:28:09.408972', '2023-08-17 00:28:09.408972'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:28:09.408972', '2023-08-17 00:28:09.408972');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:28:09.416170', '2023-08-17 00:28:09.416170'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:28:09.416170', '2023-08-17 00:28:09.416170');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:28:09.419751', '2023-08-17 00:28:09.419751', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:28:09.419751', '2023-08-17 00:28:09.419751', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:28:09.424225', '2023-08-17 00:28:09.424225', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:28:09.424225', '2023-08-17 00:28:09.424225', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:29:18.168606', '2023-08-17 00:29:18.168606'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:29:18.168606', '2023-08-17 00:29:18.168606');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:29:18.173540', '2023-08-17 00:29:18.173540'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:29:18.173540', '2023-08-17 00:29:18.173540');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:29:18.176795', '2023-08-17 00:29:18.176795', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:29:18.176795', '2023-08-17 00:29:18.176795', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:29:18.181151', '2023-08-17 00:29:18.181151', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:29:18.181151', '2023-08-17 00:29:18.181151', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.3ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:29:18.275839"], ["updated_at", "2023-08-17 00:29:18.275839"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (6.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:29:18.287531"], ["updated_at", "2023-08-17 00:29:18.287531"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:29:18.291652"], ["updated_at", "2023-08-17 00:29:18.291652"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:29:18.306533"], ["updated_at", "2023-08-17 00:29:18.306533"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:29:18.307678"], ["updated_at", "2023-08-17 00:29:18.307678"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:29:18.310026"], ["updated_at", "2023-08-17 00:29:18.310026"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:29:18.310607"], ["updated_at", "2023-08-17 00:29:18.310607"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:29:18.325775"], ["updated_at", "2023-08-17 00:29:18.325775"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:30:26.728225', '2023-08-17 00:30:26.728225'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:30:26.728225', '2023-08-17 00:30:26.728225');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:30:26.736009', '2023-08-17 00:30:26.736009'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:30:26.736009', '2023-08-17 00:30:26.736009');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:30:26.739585', '2023-08-17 00:30:26.739585', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:30:26.739585', '2023-08-17 00:30:26.739585', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:30:26.743196', '2023-08-17 00:30:26.743196', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:30:26.743196', '2023-08-17 00:30:26.743196', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:30:26.775117"], ["updated_at", "2023-08-17 00:30:26.775117"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (11.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:30:26.816705"], ["updated_at", "2023-08-17 00:30:26.816705"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:30:26.819085"], ["updated_at", "2023-08-17 00:30:26.819085"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:30:26.820002"], ["updated_at", "2023-08-17 00:30:26.820002"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:30:26.831337"], ["updated_at", "2023-08-17 00:30:26.831337"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:30:26.832043"], ["updated_at", "2023-08-17 00:30:26.832043"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.4ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:30:26.837160"], ["updated_at", "2023-08-17 00:30:26.837160"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:30:26.838339"], ["updated_at", "2023-08-17 00:30:26.838339"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:32:42.992954', '2023-08-17 00:32:42.992954'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:32:42.992954', '2023-08-17 00:32:42.992954');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:32:42.999106', '2023-08-17 00:32:42.999106'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:32:42.999106', '2023-08-17 00:32:42.999106');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:32:43.003290', '2023-08-17 00:32:43.003290', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:32:43.003290', '2023-08-17 00:32:43.003290', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:32:43.010001', '2023-08-17 00:32:43.010001', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:32:43.010001', '2023-08-17 00:32:43.010001', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:32:43.040380"], ["updated_at", "2023-08-17 00:32:43.040380"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:32:43.044094"], ["updated_at", "2023-08-17 00:32:43.044094"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:32:43.058809"], ["updated_at", "2023-08-17 00:32:43.058809"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:32:43.059497"], ["updated_at", "2023-08-17 00:32:43.059497"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:32:43.064385"], ["updated_at", "2023-08-17 00:32:43.064385"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.4ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:32:43.064979"], ["updated_at", "2023-08-17 00:32:43.064979"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:32:43.084296"], ["updated_at", "2023-08-17 00:32:43.084296"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:32:43.156766"], ["updated_at", "2023-08-17 00:32:43.156766"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:35:17.942321', '2023-08-17 00:35:17.942321'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:35:17.942321', '2023-08-17 00:35:17.942321');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:35:17.948506', '2023-08-17 00:35:17.948506'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:35:17.948506', '2023-08-17 00:35:17.948506');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:35:17.953084', '2023-08-17 00:35:17.953084', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:35:17.953084', '2023-08-17 00:35:17.953084', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:35:17.971583', '2023-08-17 00:35:17.971583', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:35:17.971583', '2023-08-17 00:35:17.971583', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:35:17.999995"], ["updated_at", "2023-08-17 00:35:17.999995"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:35:18.007662"], ["updated_at", "2023-08-17 00:35:18.007662"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:35:18.021803"], ["updated_at", "2023-08-17 00:35:18.021803"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:35:18.022452"], ["updated_at", "2023-08-17 00:35:18.022452"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:35:18.033107"], ["updated_at", "2023-08-17 00:35:18.033107"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:35:18.033735"], ["updated_at", "2023-08-17 00:35:18.033735"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:35:18.038230"], ["updated_at", "2023-08-17 00:35:18.038230"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:35:18.038882"], ["updated_at", "2023-08-17 00:35:18.038882"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-08-17 00:36:20.357743', '2023-08-17 00:36:20.357743'), (298486374, DEFAULT, DEFAULT, '2023-08-17 00:36:20.357743', '2023-08-17 00:36:20.357743');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:36:20.363436', '2023-08-17 00:36:20.363436'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-08-17 00:36:20.363436', '2023-08-17 00:36:20.363436');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:36:20.366374', '2023-08-17 00:36:20.366374', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:36:20.366374', '2023-08-17 00:36:20.366374', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:36:20.369108', '2023-08-17 00:36:20.369108', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-08-17 00:36:20.369108', '2023-08-17 00:36:20.369108', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:36:20.414320"], ["updated_at", "2023-08-17 00:36:20.414320"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:36:20.419338"], ["updated_at", "2023-08-17 00:36:20.419338"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:36:20.434291"], ["updated_at", "2023-08-17 00:36:20.434291"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:36:20.435076"], ["updated_at", "2023-08-17 00:36:20.435076"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-08-17 00:36:20.440723"], ["updated_at", "2023-08-17 00:36:20.440723"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-08-17 00:36:20.441597"], ["updated_at", "2023-08-17 00:36:20.441597"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-08-17 00:36:20.446100"], ["updated_at", "2023-08-17 00:36:20.446100"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-08-17 00:36:20.447788"], ["updated_at", "2023-08-17 00:36:20.447788"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------
ShipmentsControllerTest: test_should_get_index
----------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
ShipmentsControllerTest: test_should_get_index_with_filtered_params
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
ShipmentsControllerTest: test_should_get_show
---------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mParserRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", ""], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mParserRule Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parser_rules" WHERE "parser_rules"."internal_code" = $1 LIMIT $2[0m  [["internal_code", "code123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (2.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (39.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "shipments_tracker_test"[0m
  [1m[35m (132.0ms)[0m  [1m[35mCREATE DATABASE "shipments_tracker_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.7ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "accounts" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "accounts" ("id" bigserial primary key, "company_name" character varying, "active" boolean DEFAULT TRUE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "carriers" CASCADE[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "carriers" ("id" bigserial primary key, "name" character varying NOT NULL, "url" character varying NOT NULL, "settings" jsonb, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "parser_rules" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "parser_rules" ("id" bigserial primary key, "code" character varying, "description" text, "internal_code" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "carrier_id" bigint)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_parser_rules_on_carrier_id" ON "parser_rules" ("carrier_id")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "shipments" CASCADE[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "shipments" ("id" bigserial primary key, "account_id" bigint, "status" character varying, "tracking_number" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "tracking_history" jsonb DEFAULT '{}', "carrier_id" bigint, "destination" character varying)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE INDEX "index_shipments_on_account_id" ON "shipments" ("account_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_shipments_on_carrier_id" ON "shipments" ("carrier_id")[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_shipments_on_id" ON "shipments" ("id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE INDEX "index_shipments_on_tracking_number" ON "shipments" ("tracking_number")[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying, "encrypted_password" character varying, "reset_password_token" character varying, "reset_password_sent_at" timestamp(6), "remember_created_at" timestamp(6), "confirmation_token" character varying, "confirmed_at" timestamp(6), "confirmation_sent_at" timestamp(6), "unconfirmed_email" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "account_id" bigint, "role" character varying DEFAULT 'owner')[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_users_on_account_id" ON "users" ("account_id")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_confirmation_token" ON "users" ("confirmation_token")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20230914015102)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20230801222313),
(20230802162213),
(20230803003606),
(20230803024435),
(20230803025534),
(20230804000126),
(20230804004847),
(20230804214644),
(20230805000101),
(20230805000340),
(20230805000733),
(20230805005552),
(20230805010511),
(20230810004655);

[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2023-09-16 00:51:01.045005"], ["updated_at", "2023-09-16 00:51:01.045005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "2f1f40f30c5d85f0d4ead718bb209a8d5ee0419f"], ["created_at", "2023-09-16 00:51:01.048189"], ["updated_at", "2023-09-16 00:51:01.048189"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-09-16 00:51:01.136452', '2023-09-16 00:51:01.136452'), (298486374, DEFAULT, DEFAULT, '2023-09-16 00:51:01.136452', '2023-09-16 00:51:01.136452');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:51:01.146471', '2023-09-16 00:51:01.146471'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:51:01.146471', '2023-09-16 00:51:01.146471');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:01.149562', '2023-09-16 00:51:01.149562', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:01.149562', '2023-09-16 00:51:01.149562', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:01.152849', '2023-09-16 00:51:01.152849', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:01.152849', '2023-09-16 00:51:01.152849', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (38.7ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.6ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:01.218568"], ["updated_at", "2023-09-16 00:51:01.218568"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:01.238143"], ["updated_at", "2023-09-16 00:51:01.238143"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:01.238948"], ["updated_at", "2023-09-16 00:51:01.238948"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:01.251687"], ["updated_at", "2023-09-16 00:51:01.251687"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.3ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:01.252640"], ["updated_at", "2023-09-16 00:51:01.252640"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:01.258780"], ["updated_at", "2023-09-16 00:51:01.258780"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:01.259582"], ["updated_at", "2023-09-16 00:51:01.259582"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-09-16 00:51:01.262941"], ["updated_at", "2023-09-16 00:51:01.262941"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_not_empty
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:01.264601"], ["updated_at", "2023-09-16 00:51:01.264601"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:51:01.265076"], ["updated_at", "2023-09-16 00:51:01.265076"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190967], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.0ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mShipment Create (0.8ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190967], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:51:01.266474"], ["updated_at", "2023-09-16 00:51:01.266474"], ["tracking_history", "[]"], ["carrier_id", 980190966], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_has_12_events
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:01.269214"], ["updated_at", "2023-09-16 00:51:01.269214"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:51:01.269808"], ["updated_at", "2023-09-16 00:51:01.269808"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190968], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190967], ["LIMIT", 1]]
  [1m[36mShipment Create (0.3ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190968], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:51:01.271470"], ["updated_at", "2023-09-16 00:51:01.271470"], ["tracking_history", "[]"], ["carrier_id", 980190967], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-09-16 00:51:29.360913', '2023-09-16 00:51:29.360913'), (298486374, DEFAULT, DEFAULT, '2023-09-16 00:51:29.360913', '2023-09-16 00:51:29.360913');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:51:29.382464', '2023-09-16 00:51:29.382464'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:51:29.382464', '2023-09-16 00:51:29.382464');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:29.385771', '2023-09-16 00:51:29.385771', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:29.385771', '2023-09-16 00:51:29.385771', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:29.388903', '2023-09-16 00:51:29.388903', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:51:29.388903', '2023-09-16 00:51:29.388903', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.3ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-09-16 00:51:29.420318"], ["updated_at", "2023-09-16 00:51:29.420318"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:29.428548"], ["updated_at", "2023-09-16 00:51:29.428548"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_has_12_events
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:29.430028"], ["updated_at", "2023-09-16 00:51:29.430028"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:51:29.430648"], ["updated_at", "2023-09-16 00:51:29.430648"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (11.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mShipment Create (1.8ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190964], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:51:29.456396"], ["updated_at", "2023-09-16 00:51:29.456396"], ["tracking_history", "[]"], ["carrier_id", 980190963], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_not_empty
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:29.464176"], ["updated_at", "2023-09-16 00:51:29.464176"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:51:29.465071"], ["updated_at", "2023-09-16 00:51:29.465071"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mShipment Create (0.2ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190965], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:51:29.466951"], ["updated_at", "2023-09-16 00:51:29.466951"], ["tracking_history", "[]"], ["carrier_id", 980190964], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:29.469192"], ["updated_at", "2023-09-16 00:51:29.469192"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:29.469881"], ["updated_at", "2023-09-16 00:51:29.469881"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:29.472126"], ["updated_at", "2023-09-16 00:51:29.472126"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:29.472745"], ["updated_at", "2023-09-16 00:51:29.472745"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190967], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:51:29.475186"], ["updated_at", "2023-09-16 00:51:29.475186"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:51:29.475870"], ["updated_at", "2023-09-16 00:51:29.475870"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190967], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mCarrier Load (0.3ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-09-16 00:52:50.989694', '2023-09-16 00:52:50.989694'), (298486374, DEFAULT, DEFAULT, '2023-09-16 00:52:50.989694', '2023-09-16 00:52:50.989694');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:52:51.011041', '2023-09-16 00:52:51.011041'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:52:51.011041', '2023-09-16 00:52:51.011041');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:52:51.018804', '2023-09-16 00:52:51.018804', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:52:51.018804', '2023-09-16 00:52:51.018804', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:52:51.022446', '2023-09-16 00:52:51.022446', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:52:51.022446', '2023-09-16 00:52:51.022446', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.4ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
AccountTest: test_should_not_save_account_without_company_name
--------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
AccountTest: test_should_save_account_with_valid_attributes
-----------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.3ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "Example Company"], ["active", true], ["created_at", "2023-09-16 00:52:51.052399"], ["updated_at", "2023-09-16 00:52:51.052399"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
UserTest: test_should_validate_inclusion_of_role
------------------------------------------------
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user2@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
UserTest: test_should_not_save_user_without_email
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
UserTest: test_should_validate_uniqueness_of_email
--------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user1@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_validate_presence_of_account_id
-----------------------------------------------------
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user3@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
UserTest: test_should_save_user_with_valid_attributes
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mCACHE User Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "user@example.com"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------
ShipmentTest: test_should_be_valid
----------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:52:51.067950"], ["updated_at", "2023-09-16 00:52:51.067950"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:52:51.071407"], ["updated_at", "2023-09-16 00:52:51.071407"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.2ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------
ShipmentTest: test_should_require_status
----------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:52:51.086416"], ["updated_at", "2023-09-16 00:52:51.086416"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:52:51.087122"], ["updated_at", "2023-09-16 00:52:51.087122"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
ShipmentTest: test_should_require_account_id
--------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:52:51.089005"], ["updated_at", "2023-09-16 00:52:51.089005"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "FEDEX"], ["url", "https://fedex.com"], ["settings", nil], ["created_at", "2023-09-16 00:52:51.089540"], ["updated_at", "2023-09-16 00:52:51.089540"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "ABC123"], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190965], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_has_12_events
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:52:51.094705"], ["updated_at", "2023-09-16 00:52:51.094705"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.4ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:52:51.095565"], ["updated_at", "2023-09-16 00:52:51.095565"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190967], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190966], ["LIMIT", 1]]
  [1m[36mShipment Create (0.6ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190967], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:52:51.098060"], ["updated_at", "2023-09-16 00:52:51.098060"], ["tracking_history", "[]"], ["carrier_id", 980190966], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_not_empty
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.1ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:52:51.100986"], ["updated_at", "2023-09-16 00:52:51.100986"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:52:51.101558"], ["updated_at", "2023-09-16 00:52:51.101558"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190968], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190967], ["LIMIT", 1]]
  [1m[36mShipment Create (0.1ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190968], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:52:51.102968"], ["updated_at", "2023-09-16 00:52:51.102968"], ["tracking_history", "[]"], ["carrier_id", 980190967], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_url
-----------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------
CarrierTest: test_should_not_save_carrier_with_invalid_url
----------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------
CarrierTest: test_should_save_carrier_with_valid_data
-----------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["id", 1], ["name", "DHL"], ["url", "https://www.dhl.com"], ["settings", nil], ["created_at", "2023-09-16 00:52:51.105356"], ["updated_at", "2023-09-16 00:52:51.105356"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
CarrierTest: test_should_not_save_carrier_without_name
------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
ParserRuleTest: test_description_should_be_present
--------------------------------------------------
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------
ParserRuleTest: test_carrier_id_should_be_present
-------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------
ParserRuleTest: test_internal_code_should_be_present
----------------------------------------------------
  [1m[36mCarrier Load (0.1ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
ParserRuleTest: test_code_should_be_present
-------------------------------------------
  [1m[36mCarrier Load (0.9ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Pluck (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "accounts" DISABLE TRIGGER ALL;ALTER TABLE "carriers" DISABLE TRIGGER ALL;ALTER TABLE "parser_rules" DISABLE TRIGGER ALL;ALTER TABLE "shipments" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.8ms)[0m  [1m[31mDELETE FROM "accounts";
DELETE FROM "carriers";
DELETE FROM "parser_rules";
DELETE FROM "users";
INSERT INTO "accounts" ("id", "company_name", "active", "created_at", "updated_at") VALUES (980190962, DEFAULT, DEFAULT, '2023-09-16 00:53:20.716263', '2023-09-16 00:53:20.716263'), (298486374, DEFAULT, DEFAULT, '2023-09-16 00:53:20.716263', '2023-09-16 00:53:20.716263');
INSERT INTO "carriers" ("id", "name", "url", "settings", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:53:20.720917', '2023-09-16 00:53:20.720917'), (298486374, 'MyString', 'MyString', '"MyString"', '2023-09-16 00:53:20.720917', '2023-09-16 00:53:20.720917');
INSERT INTO "parser_rules" ("id", "code", "description", "internal_code", "created_at", "updated_at", "carrier_id") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:53:20.723464', '2023-09-16 00:53:20.723464', DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:53:20.723464', '2023-09-16 00:53:20.723464', DEFAULT);
INSERT INTO "users" ("id", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at", "confirmation_token", "confirmed_at", "confirmation_sent_at", "unconfirmed_email", "created_at", "updated_at", "account_id", "role") VALUES (980190962, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:53:20.727486', '2023-09-16 00:53:20.727486', DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, '2023-09-16 00:53:20.727486', '2023-09-16 00:53:20.727486', DEFAULT, DEFAULT)[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "accounts" ENABLE TRIGGER ALL;ALTER TABLE "carriers" ENABLE TRIGGER ALL;ALTER TABLE "parser_rules" ENABLE TRIGGER ALL;ALTER TABLE "shipments" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.2ms)[0m  [1m[35mdo $$
  declare r record;
BEGIN
FOR r IN (
  SELECT FORMAT(
    'UPDATE pg_constraint SET convalidated=false WHERE conname = ''%I'' AND connamespace::regnamespace = ''%I''::regnamespace; ALTER TABLE %I.%I VALIDATE CONSTRAINT %I;',
    constraint_name,
    table_schema,
    table_schema,
    table_name,
    constraint_name
  ) AS constraint_check
  FROM information_schema.table_constraints WHERE constraint_type = 'FOREIGN KEY'
)
  LOOP
    EXECUTE (r.constraint_check);
  END LOOP;
END;
$$;
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_has_12_events
-----------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.5ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:53:20.759266"], ["updated_at", "2023-09-16 00:53:20.759266"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.2ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:53:20.763491"], ["updated_at", "2023-09-16 00:53:20.763491"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.3ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.3ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190963], ["LIMIT", 1]]
  [1m[36mShipment Create (0.4ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190963], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:53:20.778003"], ["updated_at", "2023-09-16 00:53:20.778003"], ["tracking_history", "[]"], ["carrier_id", 980190963], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------
Carriers::TrackingRequesterDhlTest: test_tracking_history_not_empty
-------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAccount Create (0.2ms)[0m  [1m[32mINSERT INTO "accounts" ("company_name", "active", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["company_name", "test"], ["active", true], ["created_at", "2023-09-16 00:53:20.780556"], ["updated_at", "2023-09-16 00:53:20.780556"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCarrier Create (0.1ms)[0m  [1m[32mINSERT INTO "carriers" ("name", "url", "settings", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "DHL"], ["url", "https://api-test.dhl.com/track/shipments?trackingNumber="], ["settings", nil], ["created_at", "2023-09-16 00:53:20.781177"], ["updated_at", "2023-09-16 00:53:20.781177"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mShipment Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "shipments" WHERE "shipments"."tracking_number" = $1 LIMIT $2[0m  [["tracking_number", "3484059994"], ["LIMIT", 1]]
  [1m[36mAccount Load (0.1ms)[0m  [1m[34mSELECT "accounts".* FROM "accounts" WHERE "accounts"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mCarrier Load (0.2ms)[0m  [1m[34mSELECT "carriers".* FROM "carriers" WHERE "carriers"."id" = $1 LIMIT $2[0m  [["id", 980190964], ["LIMIT", 1]]
  [1m[36mShipment Create (0.2ms)[0m  [1m[32mINSERT INTO "shipments" ("account_id", "status", "tracking_number", "created_at", "updated_at", "tracking_history", "carrier_id", "destination") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["account_id", 980190964], ["status", "REGISTERED"], ["tracking_number", "3484059994"], ["created_at", "2023-09-16 00:53:20.782739"], ["updated_at", "2023-09-16 00:53:20.782739"], ["tracking_history", "[]"], ["carrier_id", 980190964], ["destination", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
